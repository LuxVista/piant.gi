:root {
    --pink: #ff758c;
    --dark-pink: #d64d67;
    --bg-gradient: linear-gradient(-45deg, #ff9a9e, #fad0c4, #a1c4fd, #c2e9fb);
}

/* ล้างค่าเริ่มต้น */
* { 
    box-sizing: border-box; 
    margin: 0; 
    padding: 0; 
    -webkit-tap-highlight-color: transparent; 
}

body { 
    font-family: 'Kanit', sans-serif; 
    overflow-x: hidden; 
}

/* พื้นหลังไล่เฉดสีขยับได้ */
.gradient-bg { 
    background: var(--bg-gradient); 
    background-size: 400% 400%; 
    animation: gradientMove 12s ease infinite; 
    min-height: 100vh; 
}

@keyframes gradientMove { 
    0% {background-position: 0% 50%;} 
    50% {background-position: 100% 50%;} 
    100% {background-position: 0% 50%;} 
}

.full-page { 
    min-height: 100vh; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    padding: 20px; 
}

.hidden { display: none !important; }

.main-title { 
    font-family: 'Caveat', cursive; 
    font-size: 4rem; 
    color: white; 
    margin-bottom: 20px; 
    text-shadow: 2px 2px 10px rgba(0,0,0,0.1);
}

/* กรอบวิธีเล่น (สี่เหลี่ยมตามที่สั่ง) */
.how-to-card { 
    background: white; 
    padding: 25px; 
    border-radius: 15px; 
    width: 90%; 
    max-width: 380px; 
    box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
    margin-bottom: 25px; 
}

.guide-content p { 
    color: #555; 
    margin-bottom: 10px; 
    font-size: 0.95rem; 
    border-left: 3px solid var(--pink); 
    padding-left: 10px; 
    line-height: 1.5;
}

/* หน้าใส่รหัส Glassmorphism */
.glass-box { 
    background: rgba(255, 255, 255, 0.85); 
    backdrop-filter: blur(10px); 
    padding: 40px 30px; 
    border-radius: 30px; 
    width: 100%; 
    max-width: 340px; 
    text-align: center; 
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

#pass-input { 
    width: 100%; 
    border: none; 
    background: none; 
    font-size: 2rem; 
    text-align: center; 
    letter-spacing: 8px; 
    outline: none; 
    color: var(--pink); 
}

.input-focus-line { 
    height: 2px; 
    background: #ddd; 
    width: 100%; 
    transition: 0.3s; 
}

.button-group { 
    display: flex; 
    gap: 10px; 
    justify-content: center; 
    margin-top: 20px; 
}

/* ปุ่ม 3D */
.btn-3d { 
    background: var(--pink); 
    color: white; 
    border: none; 
    padding: 12px 25px; 
    border-radius: 50px; 
    cursor: pointer; 
    box-shadow: 0 5px 0 var(--dark-pink); 
    font-weight: 600; 
    font-family: 'Kanit';
}

.btn-3d:active { 
    transform: translateY(3px); 
    box-shadow: 0 2px 0 var(--dark-pink); 
}

.btn-secondary { 
    background: #999; 
    box-shadow: 0 5px 0 #666; 
}

/* ระบบแผ่นเสียง */
.music-player { 
    position: fixed; 
    top: 20px; 
    right: 20px; 
    z-index: 5000; 
    cursor: pointer; 
}

.vinyl-wrapper { 
    position: relative; 
    width: 80px; 
    height: 80px; 
}

.vinyl-record { 
    width: 100%; 
    height: 100%; 
    border-radius: 50%; 
    border: 3px solid white; 
    animation: rotate 4s linear infinite; 
    animation-play-state: paused; 
    object-fit: cover;
}

.vinyl-arm { 
    position: absolute; 
    top: -5px; 
    right: -5px; 
    width: 25px; 
    height: 45px; 
    border-right: 3px solid #444; 
    border-top: 3px solid #444; 
    border-radius: 0 10px 0 0; 
    transform-origin: top right; 
    transform: rotate(10deg); 
    transition: 0.5s; 
    z-index: 6;
}

.playing .vinyl-arm { transform: rotate(25deg); }

@keyframes rotate { 
    from { transform: rotate(0deg); } 
    to { transform: rotate(360deg); } 
}

/* กล่องของขวัญ */
.gift-container { 
    position: relative; 
    width: 120px; 
    height: 120px; 
    cursor: pointer; 
    margin: 0 auto; 
}

.gift-box-body { 
    position: absolute; 
    bottom: 0; 
    width: 100%; 
    height: 75%; 
    background: #ff4d6d; 
    border-radius: 10px; 
    border: 3px solid white; 
}

.gift-lid { 
    position: absolute; 
    top: 0; 
    width: 110%; 
    height: 35%; 
    background: var(--pink); 
    left: -5%; 
    border-radius: 5px; 
    border: 3px solid white; 
    z-index: 2; 
    transition: 0.8s; 
}

.gift-open .gift-lid { 
    transform: translateY(-100px) rotate(-15deg); 
    opacity: 0; 
}

/* รูปภาพความทรงจำ */
#memories-canvas { 
    position: relative; 
    width: 100%; 
    min-height: 100px; 
    margin-top: 50px; 
}

.photo-card { 
    position: absolute; 
    width: 150px; 
    background: white; 
    padding: 10px 10px 30px 10px; 
    box-shadow: 0 10px 20px rgba(0,0,0,0.15); 
    border-radius: 4px; 
    transition: 0.7s; 
    cursor: pointer; 
    opacity: 0; 
    z-index: 10; 
}

.photo-card img { 
    width: 100%; 
    height: 140px; 
    object-fit: cover; 
}

/* Lightbox กดดูรูปใหญ่ */
.lightbox { 
    position: fixed; 
    inset: 0; 
    background: rgba(0,0,0,0.9); 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    z-index: 9999; 
    padding: 20px; 
}

.lightbox-modal { 
    background: white; 
    padding: 15px; 
    border-radius: 20px; 
    max-width: 450px; 
    width: 100%; 
    text-align: center; 
}

.lightbox-modal img { 
    width: 100%; 
    border-radius: 10px; 
    max-height: 60vh; 
    object-fit: contain; 
}

/* ซองจดหมาย */
.envelope-wrapper { 
    position: relative; 
    width: 280px; 
    height: 180px; 
    margin: 50px auto; 
    cursor: pointer; 
}

.envelope { 
    position: relative; 
    width: 100%; 
    height: 100%; 
    background: var(--pink); 
    border-radius: 0 0 10px 10px; 
}

.flap { 
    position: absolute; 
    top: 0; 
    left: 0; 
    border-left: 140px solid transparent; 
    border-right: 140px solid transparent; 
    border-top: 100px solid #ff4d6d; 
    z-index: 3; 
    transition: 0.6s; 
    transform-origin: top; 
}

.pocket { 
    position: absolute; 
    bottom: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background: #ff8fa3; 
    clip-path: polygon(0 40%, 50% 100%, 100% 40%, 100% 100%, 0 100%); 
    z-index: 2; 
}

/* ตัวกระดาษตอนอยู่ในซอง */
.letter { 
    position: absolute; 
    bottom: 5px; 
    left: 5%; 
    width: 90%; 
    height: 85%; 
    background: white; 
    z-index: 1; 
    transition: 0.8s; 
    padding: 15px; 
    border-radius: 5px; 
    overflow: hidden;
}

/* แก้ไข: ตัวกระดาษตอนเปิดออกมา (รองรับข้อความยาวพิเศษ) */
.envelope-wrapper.open .letter { 
    position: fixed; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
    width: 90vw; 
    max-width: 500px; 
    height: auto;             /* ยืดตามเนื้อหา */
    max-height: 80vh;         /* ไม่ให้สูงเกินจอ */
    overflow-y: auto;         /* เลื่อนอ่านได้ */
    padding: 30px 20px; 
    z-index: 2000; 
    box-shadow: 0 30px 60px rgba(0,0,0,0.4); 
    border-radius: 15px;
}

.envelope-wrapper.open .flap { transform: rotateX(180deg); }

/* สไตล์ข้อความในจดหมาย */
.letter-p {
    line-height: 1.8;
    color: #444;
    font-size: 1.05rem;
    margin-bottom: 20px;
    white-space: pre-wrap;    /* รักษาการเว้นวรรคและขึ้นบรรทัดใหม่ */
    word-wrap: break-word;
}

.signature {
    text-align: right;
    font-family: 'Caveat', cursive;
    font-size: 1.5rem;
    color: var(--pink);
}

.pulse-text { 
    color: white; 
    margin-top: 20px; 
    text-align: center;
    animation: pulse 1.5s infinite; 
}

@keyframes pulse { 
    0% { opacity: 0.5; } 
    50% { opacity: 1; } 
    100% { opacity: 0.5; } 
}